<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <h1>TICKET DETAILS FOR {{event.name}}</h1>
        {% for ticket in tickets %}
            <p>
                TICKET NAME:{{ticket.name}}<br>
                TICKET TYPE:{{ticket.ticket_type}}<br>
                TICKET PRICE:{{ticket.price}}<br>
                TICKETS AVAILABLE:{{ticket.quantity_available}}<br>
            
                <table>
                    <tr>
                        <td><button onclick="decrease('{{ticket.id}}')">-</button></td>
                        <td><p>Quantity: <span id="quantity-{{ticket.id}}"> 1 </span></p></td>
                        <td><button onclick="increase('{{ticket.id}}')">+</button></td>
                    </tr>
                </table>

                <hr>
            </p>
        {% endfor%}

        <form action="{% url 'buy-ticket' event.id %}" method="POST">
            {% csrf_token %}
            <input type="submit" value="CONFIRM TO GET TICKET">
        </form>
        <script>

            function increase(ticket_id) {
            let qty = parseInt(document.getElementById("quantity-"+ ticket_id).innerHTML);
            qty++;
            document.getElementById("quantity-"+ ticket_id).innerHTML = qty;
    
            }
            function decrease(ticket_id) {
            let qty = parseInt(document.getElementById("quantity-"+ ticket_id).innerHTML);
                if (qty > 0) {
                    qty--;
                    document.getElementById("quantity-"+ ticket_id).innerHTML = qty;
                }
     
            }

          </script>
    </body>
</html>
